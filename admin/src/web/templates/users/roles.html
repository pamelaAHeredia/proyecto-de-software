{% extends "layout.html" %}
{% block title %}Roles{% endblock %}
{% block head %}
{{ super() }}
{% endblock %}
{% block content %}

{% block roles %}
{% if user %}
<h1>Roles Del Usuario:</h1>
<h2>{{user.email}}</h2>

<table class="table table-hover table-sm">
    <thead>
        <tr>
            <th>Roles</th>
        </tr>
    </thead>
    <tbody>
        <tr>
        {% for role in user.roles %}
        <tr>
            <th>{{ role.name }}</th>

            <th><form action="{{url_for('users.users_delete_roles', id=user.id)}}"  method="post">
                <div class="form-group">
                    {{ delete_roles_form.hidden_tag() }}
                    {{ delete_roles_form.role(type="hidden", value=role.name) }}
                </div>  
                {% if user.roles|length > 1  %} 
                <button type="submit" class="btn btn-danger"> Desasignar Rol</button>  
                {% endif %} 
                </form>
            </th>

        </tr>
        {% endfor %}
        </tr>
    </tbody>
</table>

<div class="container">
    <h2> Agregar nuevo rol </h2>
    <form action="{{ url_for('users.users_add_roles', id=user.id)}}" method="post">
        <div class="form group">
            {{add_roles_form.hidden_tag()}}
            {{add_roles_form.roles}}
            <button class="btn btn-success">Asignar nuevo rol</button>
        </div>     
    </form>
</div>
{% endif %}
{% endblock %}
<a href="{{url_for('users.user_info', id=user.id)}}"> Volver </a>
{% endblock %}